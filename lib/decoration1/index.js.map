{"version":3,"file":"index.js","sources":["../../src/components/decoration1/index.js"],"sourcesContent":["import React, { useMemo } from 'react'\r\n\r\nimport PropTypes from 'prop-types'\r\n\r\nimport classnames from 'classnames'\r\n\r\nimport useAutoResize from '../../use/autoResize'\r\n\r\nimport './style.less'\r\n\r\nconst pointSideLength = 2.5\r\n\r\nconst halfPointSideLength = pointSideLength / 2\r\n\r\nconst svgWH = [200, 50]\r\n\r\nconst rowNum = 4\r\n\r\nconst rowPoints = 20\r\n\r\nfunction getPoints() {\r\n  const [w, h] = svgWH\r\n\r\n  const horizontalGap = w / (rowPoints + 1)\r\n  const verticalGap = h / (rowNum + 1)\r\n\r\n  const points = new Array(rowNum)\r\n    .fill(0)\r\n    .map((foo, i) =>\r\n      new Array(rowPoints)\r\n        .fill(0)\r\n        .map((foo, j) => [horizontalGap * (j + 1), verticalGap * (i + 1)])\r\n    )\r\n\r\n  return points.reduce((all, item) => [...all, ...item], [])\r\n}\r\n\r\nconst Decoration = ({ className, style }) => {\r\n  const { width, height, domRef } = useAutoResize()\r\n\r\n  function calcSVGData() {\r\n    const points = getPoints()\r\n\r\n    return {\r\n      points,\r\n      rects: [points[rowPoints * 2 - 1], points[rowPoints * 2 - 3]],\r\n      svgScale: [width / svgWH[0], height / svgWH[1]]\r\n    }\r\n  }\r\n\r\n  const { svgScale, points, rects } = useMemo(calcSVGData, [width, height])\r\n\r\n  const classNames = useMemo(() => classnames('dv-decoration-1', className), [\r\n    className\r\n  ])\r\n\r\n  return (\r\n    <div className={classNames} style={style} ref={domRef}>\r\n      <svg\r\n        width={`${svgWH[0]}px`}\r\n        height={`${svgWH[1]}px`}\r\n        style={{ transform: `scale(${svgScale[0]},${svgScale[1]})` }}\r\n      >\r\n        {points.reduce((prev, point, i) => {\r\n          return Math.random() > 0.6\r\n            ? [\r\n              ...prev,\r\n              <rect\r\n                key={i}\r\n                fill='#fff'\r\n                x={point[0] - halfPointSideLength}\r\n                y={point[1] - halfPointSideLength}\r\n                width={pointSideLength}\r\n                height={pointSideLength}\r\n              >\r\n                {Math.random() > 0.6 && (\r\n                  <animate\r\n                    attributeName='fill'\r\n                    values='#fff;transparent'\r\n                    dur='1s'\r\n                    begin={Math.random() * 2}\r\n                    repeatCount='indefinite'\r\n                  />\r\n                )}\r\n              </rect>\r\n            ]\r\n            : prev\r\n        }, [])}\r\n        {!!rects[0] && (\r\n          <rect\r\n            fill='#0de7c2'\r\n            x={rects[0][0] - pointSideLength}\r\n            y={rects[0][1] - pointSideLength}\r\n            width={pointSideLength * 2}\r\n            height={pointSideLength * 2}\r\n          >\r\n            <animate\r\n              attributeName='width'\r\n              values={`0;${pointSideLength * 2}`}\r\n              dur='2s'\r\n              repeatCount='indefinite'\r\n            />\r\n            <animate\r\n              attributeName='height'\r\n              values={`0;${pointSideLength * 2}`}\r\n              dur='2s'\r\n              repeatCount='indefinite'\r\n            />\r\n            <animate\r\n              attributeName='x'\r\n              values={`${rects[0][0]};${rects[0][0] - pointSideLength}`}\r\n              dur='2s'\r\n              repeatCount='indefinite'\r\n            />\r\n            <animate\r\n              attributeName='y'\r\n              values={`${rects[0][1]};${rects[0][1] - pointSideLength}`}\r\n              dur='2s'\r\n              repeatCount='indefinite'\r\n            />\r\n          </rect>\r\n        )}\r\n        {!!rects[1] && (\r\n          <rect\r\n            fill='#0de7c2'\r\n            x={rects[1][0] - 40}\r\n            y={rects[1][1] - pointSideLength}\r\n            width='40'\r\n            height={pointSideLength * 2}\r\n          >\r\n            <animate\r\n              attributeName='width'\r\n              values='0;40;0'\r\n              dur='2s'\r\n              repeatCount='indefinite'\r\n            />\r\n            <animate\r\n              attributeName='x'\r\n              values={`${rects[1][0]};${rects[1][0] - 40};${rects[1][0]}`}\r\n              dur='2s'\r\n              repeatCount='indefinite'\r\n            />\r\n          </rect>\r\n        )}\r\n      </svg>\r\n    </div>\r\n  )\r\n}\r\n\r\nDecoration.propTypes = {\r\n  className: PropTypes.string,\r\n  style: PropTypes.object\r\n}\r\n\r\nexport default Decoration\r\n"],"names":["pointSideLength","halfPointSideLength","svgWH","rowNum","rowPoints","getPoints","w","h","horizontalGap","verticalGap","points","Array","fill","map","foo","i","j","reduce","all","item","Decoration","className","style","useAutoResize","width","height","domRef","calcSVGData","useMemo","svgScale","rects","classNames","classnames","React","transform","prev","point","Math","random","propTypes","PropTypes","string","object"],"mappings":"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"}