{"version":3,"file":"index.js","sources":["../../src/components/charts/index.js"],"sourcesContent":["import React, { useRef, useEffect, useMemo } from 'react'\r\n\r\nimport PropTypes from 'prop-types'\r\n\r\nimport classnames from 'classnames'\r\n\r\nimport Chart from '@jiaminghi/charts'\r\n\r\nimport useAutoResize from '../../use/autoResize'\r\n\r\nimport './style.less'\r\n\r\nconst Charts = ({ option = {}, className, style }) => {\r\n  const { domRef } = useAutoResize(initChart, onResize)\r\n\r\n  const chartRef = useRef(null)\r\n\r\n  const chartInstanceofRef = useRef(null)\r\n\r\n  function initChart() {\r\n    chartInstanceofRef.current = new Chart(chartRef.current)\r\n\r\n    if (!option) return\r\n\r\n    chartInstanceofRef.current.setOption(option)\r\n  }\r\n\r\n  function onResize() {\r\n    const chart = chartInstanceofRef.current\r\n\r\n    if (!chart) return\r\n\r\n    chart.resize()\r\n  }\r\n\r\n  useEffect(() => {\r\n    let newOption = option\r\n    const chart = chartInstanceofRef.current\r\n\r\n    if (!chart) return\r\n\r\n    if (!newOption) newOption = {}\r\n\r\n    chart.setOption(newOption)\r\n  }, [option])\r\n\r\n  const classNames = useMemo(\r\n    () => classnames('dv-charts-container', className),\r\n    [className]\r\n  )\r\n\r\n  return (\r\n    <div className={classNames} style={style} ref={domRef}>\r\n      <div className='charts-canvas-container' ref={chartRef} />\r\n    </div>\r\n  )\r\n}\r\n\r\nCharts.propTypes = {\r\n  option: PropTypes.object,\r\n  className: PropTypes.string,\r\n  style: PropTypes.object\r\n}\r\n\r\n// 指定 props 的默认值：\r\nCharts.defaultProps = {\r\n  option: {}\r\n}\r\n\r\nexport default Charts\r\n"],"names":["Charts","option","className","style","useAutoResize","initChart","onResize","domRef","chartRef","useRef","chartInstanceofRef","current","Chart","setOption","chart","resize","newOption","classNames","useMemo","classnames","React","propTypes","PropTypes","object","string","defaultProps"],"mappings":";;;;;;;;;;;;;;;;;;;;AAYA,IAAMA,SAAS,SAATA,MAAS,OAAuC;yBAApCC,MAAoC;MAApCA,MAAoC,+BAA3B,EAA2B;MAAvBC,SAAuB,QAAvBA,SAAuB;MAAZC,KAAY,QAAZA,KAAY;;uBACjCC,wBAAcC,SAAd,EAAyBC,QAAzB,CADiC;MAC5CC,MAD4C,kBAC5CA,MAD4C;;MAG9CC,WAAWC,aAAO,IAAP,CAAjB;;MAEMC,qBAAqBD,aAAO,IAAP,CAA3B;;WAESJ,SAAT,GAAqB;uBACAM,OAAnB,GAA6B,IAAIC,eAAJ,CAAUJ,SAASG,OAAnB,CAA7B;;QAEI,CAACV,MAAL,EAAa;;uBAEMU,OAAnB,CAA2BE,SAA3B,CAAqCZ,MAArC;;;WAGOK,QAAT,GAAoB;QACZQ,QAAQJ,mBAAmBC,OAAjC;;QAEI,CAACG,KAAL,EAAY;;UAENC,MAAN;;;kBAGQ,YAAM;QACVC,YAAYf,MAAhB;QACMa,QAAQJ,mBAAmBC,OAAjC;;QAEI,CAACG,KAAL,EAAY;;QAER,CAACE,SAAL,EAAgBA,YAAY,EAAZ;;UAEVH,SAAN,CAAgBG,SAAhB;GARF,EASG,CAACf,MAAD,CATH;;MAWMgB,aAAaC,cACjB;WAAMC,qBAAW,qBAAX,EAAkCjB,SAAlC,CAAN;GADiB,EAEjB,CAACA,SAAD,CAFiB,CAAnB;;SAMEkB;;MAAK,WAAWH,UAAhB,EAA4B,OAAOd,KAAnC,EAA0C,KAAKI,MAA/C;0CACO,WAAU,yBAAf,EAAyC,KAAKC,QAA9C;GAFJ;CAvCF;;AA8CAR,OAAOqB,SAAP,GAAmB;UACTC,UAAUC,MADD;aAEND,UAAUE,MAFJ;SAGVF,UAAUC;;;CAHnB,CAOAvB,OAAOyB,YAAP,GAAsB;UACZ;CADV;;;;"}