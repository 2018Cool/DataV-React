{"version":3,"file":"index.js","sources":["../../src/components/charts/index.js"],"sourcesContent":["import React, { useRef, useEffect } from 'react'\r\n\r\nimport PropTypes from 'prop-types'\r\n\r\nimport Chart from '@jiaminghi/charts'\r\n\r\nimport useAutoResize from '../../use/autoResize'\r\n\r\nimport './style.less'\r\n\r\nconst Charts = ({ option = {} }) => {\r\n  const { domRef } = useAutoResize(initChart, onResize)\r\n\r\n  const chartRef = useRef(null)\r\n\r\n  const chartInstanceofRef = useRef(null)\r\n\r\n  function initChart() {\r\n    chartInstanceofRef.current = new Chart(chartRef.current)\r\n\r\n    if (!option) return\r\n\r\n    chartInstanceofRef.current.setOption(option)\r\n  }\r\n\r\n  function onResize() {\r\n    const chart = chartInstanceofRef.current\r\n\r\n    if (!chart) return\r\n\r\n    chart.resize()\r\n  }\r\n\r\n  useEffect(() => {\r\n    let newOption = option\r\n    const chart = chartInstanceofRef.current\r\n\r\n    if (!chart) return\r\n\r\n    if (!newOption) newOption = {}\r\n\r\n    chart.setOption(newOption)\r\n  }, [option])\r\n\r\n  return (\r\n    <div className='dv-charts-container' ref={domRef}>\r\n      <div className='charts-canvas-container' ref={chartRef} />\r\n    </div>\r\n  )\r\n}\r\n\r\nCharts.propTypes = {\r\n  option: PropTypes.object\r\n}\r\n\r\n// 指定 props 的默认值：\r\nCharts.defaultProps = {\r\n  option: {}\r\n}\r\n\r\nexport default Charts\r\n"],"names":["Charts","option","useAutoResize","initChart","onResize","domRef","chartRef","useRef","chartInstanceofRef","current","Chart","setOption","chart","resize","newOption","propTypes","PropTypes","object","defaultProps"],"mappings":";;;;;;;;;;AAUA,IAAMA,WAAS,SAATA,SAAS,OAAqB;yBAAlBC,MAAkB;MAAlBA,MAAkB,+BAAT,EAAS;;uBACfC,cAAcC,SAAd,EAAyBC,QAAzB,CADe;MAC1BC,MAD0B,kBAC1BA,MAD0B;;MAG5BC,WAAWC,OAAO,IAAP,CAAjB;;MAEMC,qBAAqBD,OAAO,IAAP,CAA3B;;WAESJ,SAAT,GAAqB;uBACAM,OAAnB,GAA6B,IAAIC,MAAJ,CAAUJ,SAASG,OAAnB,CAA7B;;QAEI,CAACR,MAAL,EAAa;;uBAEMQ,OAAnB,CAA2BE,SAA3B,CAAqCV,MAArC;;;WAGOG,QAAT,GAAoB;QACZQ,QAAQJ,mBAAmBC,OAAjC;;QAEI,CAACG,KAAL,EAAY;;UAENC,MAAN;;;YAGQ,YAAM;QACVC,YAAYb,MAAhB;QACMW,QAAQJ,mBAAmBC,OAAjC;;QAEI,CAACG,KAAL,EAAY;;QAER,CAACE,SAAL,EAAgBA,YAAY,EAAZ;;UAEVH,SAAN,CAAgBG,SAAhB;GARF,EASG,CAACb,MAAD,CATH;;SAYE;;MAAK,WAAU,qBAAf,EAAqC,KAAKI,MAA1C;iCACO,WAAU,yBAAf,EAAyC,KAAKC,QAA9C;GAFJ;CAlCF;;AAyCAN,SAAOe,SAAP,GAAmB;UACTC,UAAUC;;;CADpB,CAKAjB,SAAOkB,YAAP,GAAsB;UACZ;CADV;;;;"}