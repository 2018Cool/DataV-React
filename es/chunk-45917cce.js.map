{"version":3,"file":"chunk-45917cce.js","sources":["../src/util/index.js","../src/use/autoResize.js"],"sourcesContent":["export function randomExtend (minNum, maxNum) {\n  if (arguments.length === 1) {\n    return parseInt(Math.random() * minNum + 1, 10)\n  } else {\n    return parseInt(Math.random() * (maxNum - minNum + 1) + minNum, 10)\n  }\n}\n\n/**\n * @description                       将函数转成防抖动函数\n * @param  {Function}                 需要转成防抖动函数的函数\n * @param  {number}                   延迟时间（毫秒数）\n * @param  {boolean}                  是否执行第一次\n * @return {undefined}                无返回值\n */\nexport function debounce(fn, delay = 600, runFirstFn = true) {\n  let timer = null\n\n  return function (...rest) {\n    // 清除定时器\n    clearTimeout(timer)\n    if (runFirstFn) {\n      fn.apply(this, rest)\n      runFirstFn = false\n      return\n    }\n\n    // 设置定时器\n    timer = setTimeout(fn.bind(this, ...rest), delay)\n  }\n}\n\nexport function observerDomResize (dom, callback) {\n  const MutationObserver = window.MutationObserver || window.WebKitMutationObserver || window.MozMutationObserver\n\n  const observer = new MutationObserver(callback)\n\n  observer.observe(dom, { attributes: true, attributeFilter: ['style'], attributeOldValue: true })\n\n  return observer\n}\n\nexport function getPointDistance (pointOne, pointTwo) {\n  const minusX = Math.abs(pointOne[0] - pointTwo[0])\n\n  const minusY = Math.abs(pointOne[1] - pointTwo[1])\n\n  return Math.sqrt(minusX * minusX + minusY * minusY)\n}\n","import { useState, useCallback, useEffect, useRef } from 'react'\r\nimport { debounce, observerDomResize } from '../util/index'\r\n\r\nexport default function useAutoResize(afterAutoResizeMixinInit, onResize) {\r\n  const [state, setState] = useState({ width: 0, height: 0 })\r\n\r\n  const domRef = useRef(null)\r\n  const domObserverRef = useRef(null)\r\n  const debounceSetWHFunRef = useRef(null)\r\n  const onResizeRef = useRef(onResize)\r\n\r\n  onResizeRef.current = onResize\r\n\r\n  const setWH = useCallback((resize = true) => {\r\n    const { clientWidth, clientHeight } = domRef.current\r\n\r\n    setState({ width: clientWidth, height: clientHeight })\r\n\r\n    if (typeof onResizeRef.current === 'function' && resize) {\r\n      onResizeRef.current()\r\n    }\r\n  }, [])\r\n\r\n  const bindDomResizeCallback = useCallback(() => {\r\n    domObserverRef.current = observerDomResize(\r\n      domRef.current,\r\n      debounceSetWHFunRef.current\r\n    )\r\n\r\n    window.addEventListener('resize', debounceSetWHFunRef.current)\r\n  }, [])\r\n\r\n  const unbindDomResizeCallback = useCallback(() => {\r\n    const { current: domObserver } = domObserverRef\r\n\r\n    domObserver.disconnect()\r\n    domObserver.takeRecords()\r\n    domObserverRef.current = null\r\n\r\n    window.removeEventListener('resize', debounceSetWHFunRef.current)\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    debounceSetWHFunRef.current = debounce(setWH, 100)\r\n\r\n    debounceSetWHFunRef.current(false)\r\n\r\n    bindDomResizeCallback()\r\n\r\n    typeof afterAutoResizeMixinInit === 'function' && afterAutoResizeMixinInit()\r\n\r\n    // 组件销毁时，清除事件\r\n    return unbindDomResizeCallback\r\n  }, [])\r\n\r\n  return { ...state, domRef }\r\n}\r\n"],"names":["randomExtend","minNum","maxNum","arguments","length","parseInt","Math","random","debounce","fn","delay","runFirstFn","timer","rest","apply","setTimeout","bind","observerDomResize","dom","callback","MutationObserver","window","WebKitMutationObserver","MozMutationObserver","observer","observe","attributes","attributeFilter","attributeOldValue","getPointDistance","pointOne","pointTwo","minusX","abs","minusY","sqrt","useAutoResize","afterAutoResizeMixinInit","onResize","useState","width","height","state","setState","domRef","useRef","domObserverRef","debounceSetWHFunRef","onResizeRef","current","setWH","useCallback","resize","clientWidth","clientHeight","bindDomResizeCallback","addEventListener","unbindDomResizeCallback","domObserver","disconnect","takeRecords","removeEventListener"],"mappings":"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"}